<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8">
	<link type="text/css" rel="stylesheet" href="estilo.css" />
	<script src="ajax5.js"></script>
	<script>
		window.onload = montaTabela;
		var quantidade = parseInt(window.localStorage.getItem("quantidade"));
		window.localStorage.setItem("quantidade", quantidade);		
		function montaTabela() {
			var out = "";
			var i;
			out += "<table id=\"instrucoes\">";
			for(i=0; i < quantidade; i++){
				out += "<tr>";
				out += "<td> <select id=\"t"+i+"\"><option>BEQ</option><option>ADD.D</option> <option>MULTD</option><option>SUBD</option><option>DIV.D</option><option>L.D</option><option>S.D</option><option>ADD</option><option>DADDUI</option><option>BNEZ</option> </select></td>";
				out += "<td> <select id=\"r"+i+"\">";
				for(var k = 0; k < 31; k += 2) {
					out += "<option>F"+k+"</option>";
				}
				out += " </select></td>";
				out += "<td> <select id=\"s"+i+"\">";
				for(var k = 0; k < 31; k += 2) {
					out += "<option>F"+k+"</option>";
				}
				out += " </select></td>";
				out += "<td> <select id=\"d"+i+"\">";
				for(var k = 0; k < 31; k += 2) {
					out += "<option>F"+k+"</option>";
				}
				out += " </select></td>";
				out += "</tr>";			
			}
			out += "</table>";	
			document.getElementById("teste").innerHTML = out;
		}
		function sendTabelaDados() {
			for(var i = 0; i < quantidade; i++) {
				var auxI = document.getElementById("t"+i);
				var auxF1 = document.getElementById("r"+i);
				var auxF2 = document.getElementById("s"+i);
				var auxF3 = document.getElementById("d"+i);
				var qtLoad = document.getElementById("qtd_load").value;
				var qtStore = document.getElementById("qtd_store").value;
				var qtAdd = document.getElementById("qtd_add").value;
				var qtMult = document.getElementById("qtd_mult").value;
				var qtDiv = document.getElementById("qtd_div").value;
				window.localStorage.setItem("instrucao"+i, auxI.options[auxI.selectedIndex].text);
				window.localStorage.setItem("reg1"+i, auxF1.options[auxF1.selectedIndex].text);
				window.localStorage.setItem("reg2"+i, auxF2.options[auxF2.selectedIndex].text);
				window.localStorage.setItem("reg3"+i, auxF3.options[auxF3.selectedIndex].text);
				window.localStorage.setItem("qtdLoad", qtLoad);
				window.localStorage.setItem("qtdStore", qtStore);
				window.localStorage.setItem("qtdAdd", qtAdd);
				window.localStorage.setItem("qtdMult", qtMult);
				window.localStorage.setItem("qtdDiv", qtDiv);
			}
		}

		function tomasulo() {
			sendTabelaDados();
			window.location = "tomasulo_exec.html";
		}	

		function voltar() {
			window.location = "index.html";
		}
		
	</script>

</head>
<body>
	<div id="teste">
	</div>

	<div>
		Tempo de execução por estagio: 
		<label>Load</label>
		<input class="inp_num" id="qtd_load" type="text">
		<label>Store</label>
		<input class="inp_num" id="qtd_store" type="text">
		<label>Add/Sub</label>
		<input class="inp_num" id="qtd_add" type="text">
		<label>Mult</label>
		<input class="inp_num" id="qtd_mult" type="text">
		<label>Div</label>
		<input class="inp_num" id="qtd_div" type="text">

	<div>
	<input class="botao" style="float:right"type="button" value="Executar Tomasulo" onClick="tomasulo();">
	<input class="botao" type="button" value="Voltar" onClick="voltar();"> 

</body>
<html>
